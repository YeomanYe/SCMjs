<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Emulator</title>
</head>
<body>
	<input type="file" name="file" id="file"/>
	<script src="js/utils.js" type="text/javascript"></script>
	<script src="js/STC90C51.js" type="text/javascript"></script>
	<script src="js/fileParse.js" type="text/javascript"></script>
	<script type="text/javascript">
		//单片机执行程序的主函数
		//准备就绪位
		var isReady = false;
		function main(){
			STC90C51.PC = 0;
			var ins = parseInt(STC90C51.PFM[STC90C51.PC],16);
			while(1){
				if(STC90C51.PC>64*1024)STC90C51.PC=0;
				//执行对应指令的函数
				STC90C51.cmdFunc[ins]();
				ins = parseInt(STC90C51.PFM[++STC90C51.PC],16);
			}
		}
		window.onload = function(){
			if(isReady)main();
		};
	</script>
</body>
</html>