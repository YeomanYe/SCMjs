<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Emulator</title>
	<link rel="stylesheet" href="css/emulator.css">
</head>
<body>
	<div id="wrap">
        <canvas width="900" height="600" id="canvas2">请使用支持canvas的浏览器</canvas>
        <canvas width="900" height="600" id="canvas"></canvas>        
        <div id="control">
        <fieldset>
        	<legend>端口设置</legend>
        	<div class="right">
        		<div>P0.0-<input id="P0_0" class="pin" type="text"></div>
        		<div>P0.1-<input id="P0_1" class="pin" type="text"></div>
        		<div>P0.2-<input id="P0_2" class="pin" type="text"></div>
        		<div>P0.3-<input id="P0_3" class="pin" type="text"></div>
        		<div>P0.4-<input id="P0_4" class="pin" type="text"></div>
        		<div>P0.5-<input id="P0_5" class="pin" type="text"></div>
        		<div>P0.6-<input id="P0_6" class="pin" type="text"></div>
        		<div>P0.7-<input id="P0_7" class="pin" type="text"></div>
        	</div>
        	<div class="right">
        		<div>P1.0-<input id="P1_0" class="pin" type="text"></div>
        		<div>P1.1-<input id="P1_1" class="pin" type="text"></div>
        		<div>P1.2-<input id="P1_2" class="pin" type="text"></div>
        		<div>P1.3-<input id="P1_3" class="pin" type="text"></div>
        		<div>P1.4-<input id="P1_4" class="pin" type="text"></div>
        		<div>P1.5-<input id="P1_5" class="pin" type="text"></div>
        		<div>P1.6-<input id="P1_6" class="pin" type="text"></div>
        		<div>P1.7-<input id="P1_7" class="pin" type="text"></div>
        	</div>
        	<div class="right">
        		<div>P2.0-<input id="P2_0" class="pin" type="text"></div>
        		<div>P2.1-<input id="P2_1" class="pin" type="text"></div>
        		<div>P2.2-<input id="P2_2" class="pin" type="text"></div>
        		<div>P2.3-<input id="P2_3" class="pin" type="text"></div>
        		<div>P2.4-<input id="P2_4" class="pin" type="text"></div>
        		<div>P2.5-<input id="P2_5" class="pin" type="text"></div>
        		<div>P2.6-<input id="P2_6" class="pin" type="text"></div>
        		<div>P2.7-<input id="P2_7" class="pin" type="text"></div>
        	</div>
        	<div class="right">
        		<div>P3.0-<input id="P3_0" class="pin" type="text"></div>
        		<div>P3.1-<input id="P3_1" class="pin" type="text"></div>
        		<div>P3.2-<input id="P3_2" class="pin" type="text"></div>
        		<div>P3.3-<input id="P3_3" class="pin" type="text"></div>
        		<div>P3.4-<input id="P3_4" class="pin" type="text"></div>
        		<div>P3.5-<input id="P3_5" class="pin" type="text"></div>
        		<div>P3.6-<input id="P3_6" class="pin" type="text"></div>
        		<div>P3.7-<input id="P3_7" class="pin" type="text"></div>
        	</div>
        </fieldset>
        <fieldset>
        	<legend>控制按钮</legend>
        	<input type="file" name="file" id="file"/>
        	<input type="button" id="step" value="Step" title="单步">
            <input type="button" id="pause" value="Pause" title="暂停">
            <input type="button" id="run" value="Run" title="运行">
            <input type="button" id="stop" value="Stop" title="停止">
        </fieldset>
        </div>
    </div>
	<script src="js/utils.js" type="text/javascript"></script>
	<script src="js/STC90C51.js" type="text/javascript"></script>
	<!-- <script src="js/fileParse.js" type="text/javascript"></script> -->
	<script src="js/UI.js" type="text/javascript"></script>
    <script src="js/emulator.js" type="text/javascript"></script>
	<script type="text/javascript">
		//单片机执行程序的主函数
		//准备就绪位
		var isReady = false;
		function main(){
			STC90C51.PC = 0;
			var ins = parseInt(STC90C51.PFM[STC90C51.PC],16);
			while(1){
				if(STC90C51.PC>64*1024)STC90C51.PC=0;
				//执行对应指令的函数
				STC90C51.cmdFunc[ins]();
				ins = parseInt(STC90C51.PFM[++STC90C51.PC],16);
			}
		}
	</script>
</body>
</html>